<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

</head>
<body>
    <div class="container mt-3">
        <table class="table table-dark">
            <thead>
                <th>Sn</th>
                <th>Products</th>
                <th>Quality</th>
            </thead>
            <tbody id="tbody1"></tbody>
        </table>

        <script type="module">

            var prodNum = 0
            var tbody = document.getElementById("tbody1")

            function addItemsToTable(prod, qual) {
                let trow= document.createElement("trow")
                let td1= document.createElement("td")
                let td2= document.createElement("td")
                let td3= document.createElement("td")


                td1.innerHTML= ++prodNum
                td2.innerHTML= ++prod
                td2.innerHTML= ++qual
                

                trow.appendChild(td1)
                trow.appendChild(td2)
                trow.appendChild(td3)


                tbody.appendChild(trow) 


        }

        function AddAllProdToTable(products){
            prodNum = 0;
            tbody.innerHTML = ""
            product.forEach(element => {
                AdditemToTable(element.product, element.quality)
            });
        }






                                
                        // Import the functions you need from the SDKs you need
                        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
                        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
                       
                        const firebaseConfig = {
                            apiKey: "AIzaSyDNx-7cXFkzY8yTx9ZGr2U4i1SqBzufFbw",
                            authDomain: "inventory-monitoring-sys-86ad5.firebaseapp.com",
                            databaseURL: "https://inventory-monitoring-sys-86ad5-default-rtdb.firebaseio.com",
                            projectId: "inventory-monitoring-sys-86ad5",
                            storageBucket: "inventory-monitoring-sys-86ad5.appspot.com",
                            messagingSenderId: "364913891770",
                            appId: "1:364913891770:web:eaccf333b654fe88f66583",
                            measurementId: "G-4LT3W3VZBD"
                        };

                        // Initialize Firebase
                        const app = initializeApp(firebaseConfig);
                        const analytics = getAnalytics(app);

                        import{getDatabase, ref, child, onValue, get}
 
                        from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";

                        const db = getDatabase();











        function getAllDataOnce(){
            const dbRef = ref(db)

            get(child(dbRef, "productList"))
            .then((snapshot) => {
                var products = [];
                snapshot.forEach(childSnapshot =>{
                    products.push(childSnapshot.val())
                })


                AddAllProdToTable(products)
            })
        }




        



        function getAllDataRealtime(){
            const dbRef = ref(db, "productList")

            onValue(dbRef, (snapshot)=>{
                 var products = [];
                snapshot.forEach(childSnapshot =>{
                    products.push(childSnapshot.val())
                })


                AddAllProdToTable(products)
            })
            
           
            
        }

        window.onload = getAllDataRealtime
    </script>
</body>
</html>